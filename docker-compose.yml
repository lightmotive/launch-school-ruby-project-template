version: '3.4'

services:
  ruby-container:
    image: ruby-container
    volumes:
      # Mount the root folder
      - .:/workspace:cached
    command: /bin/sh -c "while sleep 1000; do :; done"
    build:
      context: .
      dockerfile: ./.devcontainer/Dockerfile
      args:
        VARIANT: 3.1
        NODE_VERSION: lts/*
    networks:
      - plantuml-server
    ports:
      - '49152:49152'

  plantuml-container:
    image: 'plantuml/plantuml-server:jetty'
    networks:
      plantuml-server:
        aliases:
          - plantuml
    ports:
      - '8080'

networks:
  plantuml-server:
